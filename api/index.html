<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>OpenApiTransformerBase</h1>
<p><a href="https://github.com/kevinoid/openapi-transformer-base/actions?query=branch%3Amain"><img src="https://img.shields.io/github/workflow/status/kevinoid/openapi-transformer-base/Node.js%20CI/main.svg?style=flat&amp;label=build" alt="Build Status"></a>
<a href="https://codecov.io/github/kevinoid/openapi-transformer-base?branch=main"><img src="https://img.shields.io/codecov/c/github/kevinoid/openapi-transformer-base.svg?style=flat" alt="Coverage"></a>
<a href="https://david-dm.org/kevinoid/openapi-transformer-base"><img src="https://img.shields.io/david/kevinoid/openapi-transformer-base.svg?style=flat" alt="Dependency Status"></a>
<a href="https://www.npmjs.com/package/openapi-transformer-base"><img src="https://img.shields.io/node/v/openapi-transformer-base.svg?style=flat" alt="Supported Node Version"></a>
<a href="https://www.npmjs.com/package/openapi-transformer-base"><img src="https://img.shields.io/npm/v/openapi-transformer-base.svg?style=flat" alt="Version on NPM"></a></p>
<p>Base class for traversing or transforming <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md">OpenAPI
2</a>
or <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md">OpenAPI
3</a>
documents using a modified <a href="https://en.wikipedia.org/wiki/Visitor_pattern">visitor design
pattern</a> to traverse object
types within the OpenAPI document tree.</p>
<p>This class is used to implement several common OpenAPI document
transformations in
<a href="https://github.com/kevinoid/openapi-transformers">@kevinoid/openapi-transformers</a>.</p>
<h2>Introductory Examples</h2>
<h3>Gather External Documentation</h3>
<p>To gather all <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#externalDocumentationObject">External
Documentation</a>
objects in an OpenAPI 3 document using an ad-hoc (i.e. monkey-patched)
subclass:</p>
<pre class="prettyprint source lang-js"><code>const OpenApiTransformerBase = require('openapi-transformer-base');
const { readFile } = require('fs').promises;

readFile('openapi.json', 'utf8')
  .then((openApiString) => {
    // Array which holds the collected externalDocs
    const allExternalDocs = [];

    // Create ad-hoc subclass of OpenApiTransformerBase to collect externalDocs
    const transformer = new OpenApiTransformerBase();
    transformer.transformExternalDocs = (externalDocs) => {
      allExternalDocs.push(externalDocs);
      return externalDocs;
    };

    // Parse, then traverse the OpenAPI document
    const openApi = JSON.parse(openApiString);
    transformer.transformOpenApi(openApi);

    console.log('All External Documentation:', allExternalDocs);
  });
</code></pre>
<h3>Change Integer to Number Schema Type</h3>
<p>Since <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#data-types"><code>type: integer</code> is an OpenAPI-specific
extension</a>
of <a href="https://json-schema.org/draft/2019-09/json-schema-validation.html#rfc.section.6.1.1"><code>type</code> in JSON
Schema</a>,
it may be desirable to change schemas with <code>type: integer</code> to <code>type: number</code>
with <code>multipleOf: 1</code> for use by JSON Schema tools:</p>
<pre class="prettyprint source lang-js"><code>const OpenApiTransformerBase = require('openapi-transformer-base');
const { readFile } = require('fs').promises;

class OpenApiIntegerTypeTransformer extends OpenApiTransformerBase {
  transformSchema(schema) {
    // Perform any other transformations on this schema or its child objects
    let newSchema = super.transformSchema(schema);

    if (newSchema.type === 'integer') {
      newSchema = {
        ...newSchema,
        type: 'number',
        multipleOf: 1,
      };
    }

    return newSchema;
  }
}

readFile('openapi.json', 'utf8')
  .then((openApiString) => {
    const openApi = JSON.parse(openApiString);

    const transformer = new OpenApiIntegerTypeTransformer();
    const newOpenApi = transformer.transformOpenApi(openApi);
    console.log('Transformed OpenAPI Document:', newOpenApi);
  });
</code></pre>
<p>More examples can be found in the <a href="https://kevinoid.github.io/openapi-transformer-base/spec">test
specifications</a>.</p>
<h2>API Docs</h2>
<p>See the <a href="https://kevinoid.github.io/openapi-transformer-base/api">JSDoc API
Documentation</a>.</p>
<h2>Contributing</h2>
<p>Contributions are appreciated.  Contributors agree to abide by the <a href="https://www.contributor-covenant.org/version/1/4/code-of-conduct.html">Contributor
Covenant Code of
Conduct</a>.
If this is your first time contributing to a Free and Open Source Software
project, consider reading <a href="https://opensource.guide/how-to-contribute/">How to Contribute to Open
Source</a>
in the Open Source Guides.</p>
<p>If the desired change is large, complex, backwards-incompatible, can have
significantly differing implementations, or may not be in scope for this
project, opening an issue before writing the code can avoid frustration and
save a lot of time and effort.</p>
<h2>License</h2>
<p>This project is available under the terms of the <a href="LICENSE.txt">MIT License</a>.
See the <a href="https://tldrlegal.com/license/mit-license">summary at TLDRLegal</a>.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-openapi-transformer-base.html">openapi-transformer-base</a></li></ul><h3>Classes</h3><ul><li><a href="module-openapi-transformer-base-OpenApiTransformerBase.html">OpenApiTransformerBase</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sat May 29 2021 17:24:18 GMT-0600 (Mountain Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>